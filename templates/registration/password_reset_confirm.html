{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva Contrase침a</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Estilos forzados para los inputs de Django */
        input { 
            width: 100%; 
            padding: 0.75rem; 
            background-color: #F9FAFB; 
            border-radius: 0.75rem; 
            border: 1px solid #E5E7EB; 
            outline: none; 
            margin-top: 0.5rem;
            margin-bottom: 1rem; 
            color: #1A2238;
            font-weight: bold;
        }
        input:focus { border-color: #C0A062; background-color: #fff; }
        label { font-size: 0.75rem; font-weight: 700; color: #9CA3AF; text-transform: uppercase; display: block; text-align: left; }
        ul { font-size: 0.75rem; color: #EF4444; list-style: none; margin-bottom: 10px; text-align: left; }
        .helptext { display: none; } 
    </style>
</head>
<body class="h-screen flex items-center justify-center bg-[#1A2238]">

    <div class="bg-white p-10 rounded-[2rem] shadow-2xl w-full max-w-md m-4">
        
        {% if validlink %}
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-[#1A2238] rounded-full flex items-center justify-center mx-auto mb-4 text-[#C0A062]">
                    <i class="fas fa-key text-2xl"></i>
                </div>
                <h2 class="text-2xl font-black text-[#1A2238]">Nueva Contrase침a</h2>
                <p class="text-gray-400 text-xs mt-2">Introduce tu nueva clave segura.</p>
            </div>

            <form method="POST">
                {% csrf_token %}
                {{ form.as_p }}
                
                <button type="submit" class="w-full bg-[#1A2238] text-white py-4 rounded-xl font-black text-xs tracking-widest hover:bg-[#2C3E50] shadow-lg transition-all mt-4">
                    CONFIRMAR CAMBIO
                </button>
            </form>

        {% else %}
            <div class="text-center">
                <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6 text-red-500">
                    <i class="fas fa-exclamation-triangle text-2xl"></i>
                </div>
                <h2 class="text-2xl font-black text-[#1A2238] mb-2">Enlace Inv치lido</h2>
                <p class="text-gray-500 text-sm mb-8">
                    Este enlace de recuperaci칩n ya fue usado o ha expirado. Por favor solicita uno nuevo.
                </p>
                
                <a href="{% url 'password_reset' %}" class="block w-full bg-[#1A2238] text-white py-3 rounded-xl font-bold hover:bg-[#2C3E50] transition-colors">
                    SOLICITAR NUEVO ENLACE
                </a>
            </div>
        {% endif %}

    </div>

</body>
</html>